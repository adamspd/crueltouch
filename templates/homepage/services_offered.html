{% extends 'homepage/base.html' %}
{% load i18n %}
{% load static %}

{% block priceTableCSS %}
    <link rel="stylesheet" type="text/css" href="{% static 'homepage/css/services.css' %}"/>
{% endblock %}

{% block title %}{{ page_title }}{% endblock %}
{% block description %}{{ page_description }}{% endblock %}

{% block body %}
    <div class="main-container">

        <div class="location-toolbar">
            <label for="city-select">Session Location:</label>
            <div class="city-scroller">
                {% for city in cities %}
                    <a href="?city={{ city.id }}"
                       class="city-chip
                              {% if selected_city.id == city.id %}active{% endif %}
                              {% if city.is_economy_zone %}special-zone{% endif %}"> {{ city.name }}
                    </a>
                {% endfor %}
            </div>
        </div>

        <h1 class="page-title">{% trans "Select Your Package" %}</h1>

        <div class="page-menu">
            <div class="category-button portrait-service"
                 onclick="showService('portrait-service')">{% translate 'Portrait' %}</div>
            <div class="category-button wedding-service"
                 onclick="showService('wedding-service')">{% translate 'Wedding' %}</div>
            <div class="category-button product-service"
                 onclick="showService('product-service')">{% translate 'Product' %}</div>
            <div class="category-button event-service"
                 onclick="showService('event-service')">{% translate 'Events' %}</div>
        </div>

        <div class="page-body">

            {% if not selected_city %}
                <div class="no-city-state">
                    <h3>Select a city above to see availability and pricing.</h3>
                    <p>Prices and packages vary by location (Naples, Tampa, Orlando, etc).</p>
                </div>
            {% else %}

                <div class="category-container">
                    <div class="portrait-service service-list" id="portrait-service">
                        {% if portrait_service %}
                            {% for service in portrait_service %}
                                {% include "homepage/includes/service_card.html" with service=service %}
                            {% endfor %}
                        {% else %}
                            <p class="empty-msg">No portrait packages available in {{ selected_city.name }}.</p>
                        {% endif %}
                    </div>

                    <div class="wedding-service service-list" id="wedding-service">
                        {% if wedding_service %}
                            {% for service in wedding_service %}
                                {% include "homepage/includes/service_card.html" with service=service %}
                            {% endfor %}
                        {% else %}
                            <p class="empty-msg">No wedding packages available in {{ selected_city.name }}.</p>
                        {% endif %}
                    </div>

                    <div class="product-service service-list" id="product-service">
                        {% if product_service %}
                            {% for service in product_service %}
                                {% include "homepage/includes/service_card.html" with service=service %}
                            {% endfor %}
                        {% else %}
                            <p class="empty-msg">No product packages available in {{ selected_city.name }}.</p>
                        {% endif %}
                    </div>

                    <div class="event-service service-list" id="event-service">
                        {% if event_service %}
                            {% for service in event_service %}
                                {% include "homepage/includes/service_card.html" with service=service %}
                            {% endfor %}
                        {% else %}
                            <p class="empty-msg">No event packages available in {{ selected_city.name }}.</p>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        function showService(serviceClass) {
            // Hide all lists
            document.querySelectorAll('.service-list').forEach(el => el.style.display = 'none');
            // Remove active class from buttons
            document.querySelectorAll('.category-button').forEach(btn => btn.classList.remove('active'));

            // Show selected
            const selected = document.getElementById(serviceClass);
            if (selected) selected.style.display = 'block'; // Or 'grid' if you change CSS

            // Highlight button
            const btn = document.querySelector('.' + serviceClass);
            if (btn) btn.classList.add('active');
        }

        // Default open
        showService('portrait-service');
    </script>
{% endblock %}
